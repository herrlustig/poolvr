<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">

    <link rel="shortcut icon" href="/examples/poolvr/favicon.ico">

    <title>poolvr</title>

    <style>
      body {
        background-color: #000;
        color: #fff;
        margin: 0px;
        padding: 0;
        overflow: hidden;
      }
    </style>

<script>
var JSON_CONFIG = {"WEBSOCKETS": ["/gfxtablet"], "TESTING": false, "DEBUG": false};
var JSON_SCENE = {"images": [{"uuid": "f87124bb-5942-4e14-8582-2ea5b6246912", "type": "Image", "name": "deck", "url": "images/deck.png"}], "geometries": [{"depth": 2.34, "height": 0.876, "type": "BoxGeometry", "widthSegments": 1, "heightSegments": 1, "width": 1.17, "uuid": "cd935e34-5239-426e-876e-8cf931c8e1c9", "name": "unnamed BoxGeometry 4", "depthSegments": 1}, {"uuid": "a1f25f63-fced-4d1c-bf2b-af35b7491b63", "type": "BufferGeometry", "name": "unnamed RectangleBufferGeometry 0", "data": {"attributes": {"uv": {"type": "Float32Array", "itemSize": 2, "array": [0, 1, 0, 0, 1, 0, 1, 1]}, "position": {"type": "Float32Array", "itemSize": 3, "array": [-0.5, 0.0, -0.5, -0.5, 0.0, 0.5, 0.5, 0.0, 0.5, 0.5, 0.0, -0.5]}, "index": {"type": "Uint32Array", "itemSize": 1, "array": [0, 1, 2, 0, 2, 3]}}}}, {"depth": 900, "height": 900, "type": "BoxGeometry", "widthSegments": 1, "heightSegments": 1, "width": 900, "uuid": "1e26b901-fdb7-46df-8dbf-d45074ad6e1a", "name": "unnamed BoxGeometry 5", "depthSegments": 1}, {"type": "SphereBufferGeometry", "widthSegments": 16, "thetaStart": 0, "phiStart": 0, "heightSegments": 32, "uuid": "6811b349-9c9d-4da5-a914-e6dba7d5d7cf", "name": "unnamed SphereBufferGeometry 2", "phiLength": 6.283185307179586, "radius": 0.028575, "thetaLength": 6.283185307179586}], "materials": [{"uuid": "bdb5720d-9059-4cfe-8d61-14c852707d4d", "vertexShader": "varying vec3 vWorldPosition;\n#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\n\nvec3 transformDirection( in vec3 normal, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( normal, 0.0 ) ).xyz );\n\n}\n\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\n\n\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\n\treturn - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n\nfloat calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {\n\n\tif ( decayExponent > 0.0 ) {\n\n\t  return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n\t}\n\n\treturn 1.0;\n\n}\n\nvec3 F_Schlick( in vec3 specularColor, in float dotLH ) {\n\n\t// Original approximation by Christophe Schlick '94\n\t//;float fresnel = pow( 1.0 - dotLH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH '13)\n\tfloat fresnel = exp2( ( -5.55437 * dotLH - 6.98316 ) * dotLH );\n\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n\n}\n\nfloat G_BlinnPhong_Implicit( /* in float dotNL, in float dotNV */ ) {\n\n\t// geometry term is (n\u22c5l)(n\u22c5v) / 4(n\u22c5l)(n\u22c5v)\n\n\treturn 0.25;\n\n}\n\nfloat D_BlinnPhong( in float shininess, in float dotNH ) {\n\n\t// factor of 1/PI in distribution term omitted\n\n\treturn ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_BlinnPhong( in vec3 specularColor, in float shininess, in vec3 normal, in vec3 lightDir, in vec3 viewDir ) {\n\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\n\t//float dotNL = saturate( dot( normal, lightDir ) );\n\t//float dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( lightDir, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\n\treturn F * G * D;\n\n}\n\nvec3 inputToLinear( in vec3 a ) {\n\n\t#ifdef GAMMA_INPUT\n\n\t\treturn pow( a, vec3( float( GAMMA_FACTOR ) ) );\n\n\t#else\n\n\t\treturn a;\n\n\t#endif\n\n}\n\nvec3 linearToOutput( in vec3 a ) {\n\n\t#ifdef GAMMA_OUTPUT\n\n\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n\n\t#else\n\n\t\treturn a;\n\n\t#endif\n\n}\n\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n\tuniform float logDepthBufFC;\n\n#endif\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n#ifdef USE_LOGDEPTHBUF\n\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n\t#endif\n\n#endif\n}", "type": "ShaderMaterial", "name": "unnamed ShaderMaterial 2", "side": 1, "fragmentShader": "uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\n\nvec3 transformDirection( in vec3 normal, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( normal, 0.0 ) ).xyz );\n\n}\n\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\n\n\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\n\treturn - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n\nfloat calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {\n\n\tif ( decayExponent > 0.0 ) {\n\n\t  return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n\t}\n\n\treturn 1.0;\n\n}\n\nvec3 F_Schlick( in vec3 specularColor, in float dotLH ) {\n\n\t// Original approximation by Christophe Schlick '94\n\t//;float fresnel = pow( 1.0 - dotLH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH '13)\n\tfloat fresnel = exp2( ( -5.55437 * dotLH - 6.98316 ) * dotLH );\n\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n\n}\n\nfloat G_BlinnPhong_Implicit( /* in float dotNL, in float dotNV */ ) {\n\n\t// geometry term is (n\u22c5l)(n\u22c5v) / 4(n\u22c5l)(n\u22c5v)\n\n\treturn 0.25;\n\n}\n\nfloat D_BlinnPhong( in float shininess, in float dotNH ) {\n\n\t// factor of 1/PI in distribution term omitted\n\n\treturn ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_BlinnPhong( in vec3 specularColor, in float shininess, in vec3 normal, in vec3 lightDir, in vec3 viewDir ) {\n\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\n\t//float dotNL = saturate( dot( normal, lightDir ) );\n\t//float dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( lightDir, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\n\treturn F * G * D;\n\n}\n\nvec3 inputToLinear( in vec3 a ) {\n\n\t#ifdef GAMMA_INPUT\n\n\t\treturn pow( a, vec3( float( GAMMA_FACTOR ) ) );\n\n\t#else\n\n\t\treturn a;\n\n\t#endif\n\n}\n\nvec3 linearToOutput( in vec3 a ) {\n\n\t#ifdef GAMMA_OUTPUT\n\n\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n\n\t#else\n\n\t\treturn a;\n\n\t#endif\n\n}\n\n#ifdef USE_LOGDEPTHBUF\n\n\tuniform float logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n#endif\n\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif\n}", "uniforms": {"tFlip": {"type": "f", "value": -1}, "tCube": {"type": "t", "value": ["images/skybox/px.jpg", "images/skybox/nx.jpg", "images/skybox/py.jpg", "images/skybox/ny.jpg", "images/skybox/pz.jpg", "images/skybox/nz.jpg"]}}}, {"color": 16777215, "uuid": "e6769944-9b57-4a41-9284-aaf202ececac", "type": "MeshBasicMaterial", "name": "unnamed MeshBasicMaterial 2", "map": "4b92365c-e88c-41f5-9942-cd24b9d61982"}, {"color": 15597568, "uuid": "f2e9f8b1-b01a-4d88-a55c-7bd445fc4923", "type": "MeshPhongMaterial", "name": "unnamed MeshPhongMaterial 12"}, {"shininess": 5, "uuid": "2f7d8dd8-2dd5-416c-b304-59081bd39274", "type": "MeshPhongMaterial", "name": "unnamed MeshPhongMaterial 10", "color": 43520}, {"color": 60928, "uuid": "b610b4a5-9750-473f-8593-1e2356e8ad6d", "type": "MeshPhongMaterial", "name": "unnamed MeshPhongMaterial 13"}, {"color": 15658734, "uuid": "d91dc134-ddc6-404c-b0b0-08da5ffcceed", "type": "MeshPhongMaterial", "name": "unnamed MeshPhongMaterial 11"}, {"color": 14544384, "uuid": "72aac04a-5a79-41f5-a928-9136e3db78a5", "type": "MeshPhongMaterial", "name": "unnamed MeshPhongMaterial 14"}], "textures": [{"type": "Texture", "anisotropy": 1, "repeat": [7, 7], "image": "f87124bb-5942-4e14-8582-2ea5b6246912", "magFilter": 1006, "wrap": [1000, 1000], "minFilter": 1008, "uuid": "4b92365c-e88c-41f5-9942-cd24b9d61982", "name": "unnamed Texture 2", "mapping": 300}], "object": {"uuid": "497d7154-a798-4c52-8f15-45a38f5a9c77", "matrix": [1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0], "type": "Scene", "children": [{"color": 2250018, "uuid": "ebc470c9-d603-4652-801d-2f551a85a3e8", "matrix": [1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 6.0, 2.0, 0.5, 1.0], "type": "PointLight", "name": "unnamed PointLight 2", "intensity": 0.5, "children": []}, {"material": "e6769944-9b57-4a41-9284-aaf202ececac", "uuid": "99a20d5e-4d85-472b-b70c-8996922799e8", "matrix": [7.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 7.0, 0.0, 0.0, 0.0, 0.0, 1.0], "type": "Mesh", "name": "floor", "geometry": "a1f25f63-fced-4d1c-bf2b-af35b7491b63", "children": []}, {"geometry": "cd935e34-5239-426e-876e-8cf931c8e1c9", "type": "Mesh", "userData": {"cannonData": {"shapes": ["Box"], "mass": 0}}, "receiveShadow": true, "material": "2f7d8dd8-2dd5-416c-b304-59081bd39274", "uuid": "a42d225a-97c1-46da-9194-4f793a40e7d6", "matrix": [1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.438, 0.0, 1.0], "name": "unnamed Mesh 12", "children": []}, {"geometry": "6811b349-9c9d-4da5-a914-e6dba7d5d7cf", "type": "Mesh", "userData": {"cannonData": {"shapes": ["Sphere"], "mass": 0.17}}, "castShadow": true, "material": "d91dc134-ddc6-404c-b0b0-08da5ffcceed", "uuid": "0721dd32-0099-46be-b7b0-fd020a06884f", "matrix": [1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.905575, 0.7, 1.0], "name": "unnamed Mesh 13", "children": []}, {"geometry": "6811b349-9c9d-4da5-a914-e6dba7d5d7cf", "type": "Mesh", "userData": {"cannonData": {"shapes": ["Sphere"], "mass": 0.17}}, "castShadow": true, "material": "f2e9f8b1-b01a-4d88-a55c-7bd445fc4923", "uuid": "6ab1fc05-23da-4b23-87a3-cb7867173e79", "matrix": [1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.905575, -0.7, 1.0], "name": "unnamed Mesh 14", "children": []}, {"geometry": "6811b349-9c9d-4da5-a914-e6dba7d5d7cf", "type": "Mesh", "userData": {"cannonData": {"shapes": ["Sphere"], "mass": 0.17}}, "castShadow": true, "material": "b610b4a5-9750-473f-8593-1e2356e8ad6d", "uuid": "f5eb54f4-1dda-4675-928d-db7d58844c0f", "matrix": [1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.905575, 0.0, 1.0], "name": "unnamed Mesh 15", "children": []}, {"geometry": "6811b349-9c9d-4da5-a914-e6dba7d5d7cf", "type": "Mesh", "userData": {"cannonData": {"shapes": ["Sphere"], "mass": 0.17}}, "castShadow": true, "material": "72aac04a-5a79-41f5-a928-9136e3db78a5", "uuid": "c60f7962-61e2-4fc4-8024-90b11816dde8", "matrix": [1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.38999999999999996, 0.905575, 0.0, 1.0], "name": "unnamed Mesh 16", "children": []}, {"material": "bdb5720d-9059-4cfe-8d61-14c852707d4d", "uuid": "fef838a1-5c8d-49bd-bb64-7594b04a2f54", "matrix": [1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0], "type": "Mesh", "name": "unnamed Mesh 17", "geometry": "1e26b901-fdb7-46df-8dbf-d45074ad6e1a", "children": []}], "name": "unnamed Scene 2"}};
</script>

  </head>

  <body onload="onLoad()">

    <script src="/bin/three-r73.min.js"></script>
    <script src="/bin/TextGeometry.min.js"></script>
    <script src="/bin/FontUtils.min.js"></script>
    <script src="/bin/ColladaLoader.min.js"></script>
    <script src="/bin/VREffect.min.js"></script>
    <script src="/bin/VRControls.min.js"></script>
    <script src="/bin/webvr-polyfill.min.js"></script>
    <script src="/bin/webvr-manager.min.js"></script>

    <script src="/bin/socket.io.min.js"></script>
    <script src="/bin/cannon.min.js"></script>
    <script src="/bin/leap-0.6.4.min.js"></script>

    <script src="/bin/leap.transform.min.js"></script>

    <!-- <script src="/lib/leap.transform.original.js"></script> -->

    <script src="/bin/Primrose.min.js"></script>

    <script src="/src/pyserver.js"></script>
    <script src="/src/CrapLoader.js"></script>
    <script src="/src/WebVRApplication.js"></script>
    <script src="/src/LeapTools.js"></script>

    <script src="/lib/fonts/helvetiker_regular.typeface.js"></script>
    <script src="/lib/fonts/helvetiker_bold.typeface.js"></script>
    <script src="/lib/fonts/Anonymous%20Pro_Regular.js"></script>

    <script src="/examples/poolvr/app.js"></script>
  </body>
</html>
